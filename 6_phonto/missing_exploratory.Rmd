---
title: "Explore Missing Data"

date: "Updated on : `r date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
### configuration DB 

```{r data_config,warning=FALSE,message=FALSE}
sqlHost <- "localhost"
sqlUserName <- "sa"
sqlPassword <- "yourStrong(!)Password"
sqlDefaultDb <- "NhanesLandingZone"
```

## Load libs

```{r libs,warning=FALSE,message=FALSE}
library(naniar)
library(visdat)
library(corrplot)
library(phonto)
```





## Load data

##FIXME: - you need to explain in words what you are going to show the reader 
and why you are doing this work.
```{r missing_r}
demo = phonto::nhanes('DEMO_E')
DT::datatable(demo)
```

##FIXME: the html shows that the data table is too big for rendering in
html - so please try to see how you can explain what you want to do either
with a smaller data set or perhaps you don't need the data table? What is the
purpose of it?



## Missing pattern across variables (eg. age)

##FIXME; I have no idea what you are showing and why?  What does RIDAGEYR
have to do with it?  What am I supposed to see in the picture?
```{r missing}
gg_miss_fct(demo,fct = RIDAGEYR)

```

## show missing percentage

##FIXME: note that html shows a warning for this call - we might want to
fix that.
```{r missing1}
gg_miss_var(demo,show_pct = TRUE)

```

## Plot missing pattern

```{r miss_clipp,warning=FALSE}
vis_miss(demo,warn_large_data=FALSE)
```

## Missing Correlation

##FIXME: just want to say, please pick one or two visualizations, that you think do the best job of showing missingness and joint missingness and have those. Please don't put in plots without text describing what you are doing, why you are doing it, and what the reader should see, or maybe how they should interpret the plots.
```{r}

missing_cols = sapply(demo, function(x)sum(is.na(x)))
missing_cols = missing_cols[missing_cols>0] # select the data with missing values
missing_cols

correlation = cor(is.na(demo[,names(missing_cols)]))
corrplot(correlation, type = "upper", order = "hclust",
         tl.col = "black", tl.srt = 45)
```





